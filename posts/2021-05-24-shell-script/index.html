<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8b56f28f71d8cde6ecde.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap);@import url(https://fonts.googleapis.com/css2?family=Raleway&display=swap);code[class*=language-],pre[class*=language-]{color:#abb2bf;background:none;font-family:Roboto Mono,SFMono-Regular,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:.9em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282c34;border-radius:8px}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:rgba(148,170,209,.2)}.language-html .token.doctype-tag{color:#e06c75}.language-html .token.name{color:#d19a66}.language-html .token.punctuation{color:#abb2bf}.language-html .token.tag .token.tag{color:#e06c75}.language-html .token.tag .token.attr-name{color:#d19a66}.language-html .token.tag .token.attr-value,.language-html .token.tag .token.attr-value .token.punctuation{color:#98c379}.language-html .token.tag .token.attr-value .token.punctuation.attr-equals{color:#abb2bf}.language-html .token.comment{color:#7f848e;font-style:italic}code[class*=language-css],pre[class*=language-css]{color:#d19a66}.language-css .token.combinator,.language-css .token.operator,.language-css .token.property,.language-css .token.punctuation{color:#abb2bf}.language-css .token.attr-name,.language-css .token.class,.language-css .token.color,.language-css .token.number{color:#d19a66}.language-css .token.attr-value,.language-css .token.string{color:#98c379}.language-css .token.selector,.language-css .token.unit{color:#e06c75}.language-css .token.property.prefix,.language-css .token.pseudo-class,.language-css .token.pseudo-element{color:#56b6c2}.language-css .token.atrule{color:#abb2bf}.language-css .token.atrule .token.rule{color:#c678dd}.language-css .token.comment{color:#7f848e;font-style:italic}.language-javascript,code[class*=language-javascript],pre[class*=language-javascript]{color:#e06c75}.language-javascript .token.punctuation{color:#abb2bf}.language-javascript .token.comment{color:#7f848e;font-style:italic}.language-javascript .token.class-name,.language-javascript .token.dom.variable,.language-javascript .token.keyword.this{color:#e5c07b}.language-javascript .token.boolean,.language-javascript .token.null,.language-javascript .token.number{color:#d19a66}.language-javascript .token.imports,.language-javascript .token.parameter,.language-javascript .token.property-access{color:#e06c75}.language-javascript .token.parameter{font-style:italic}.language-javascript .token.keyword{color:#c678dd}.language-javascript .token.function,.language-javascript .token.property-access.function.method{color:#61afef}.language-javascript .token.operator,.language-javascript .token.regex-source{color:#56b6c2}.language-javascript .token.regex-delimiter,.language-javascript .token.string{color:#98c379}.language-json .token.operator,.language-json .token.punctuation{color:#abb2bf}.language-json .token.string{color:#98c379}.language-json .token.boolean,.language-json .token.null.keyword,.language-json .token.number{color:#d19a66}.language-json .token.property{color:#e06c75}.language-python .token.string{color:#98c379}.language-python .token.comment{color:#7f848e;font-style:italic}.language-python .token.keyword{color:#c678dd;font-style:italic}.language-python .token.function,.language-python .token.operator{color:#56b6c2}.language-python .token.number{color:#d19a66}.language-bash .token.string,.language-shell .token.string{color:#98c379}.language-bash .token.comment,.language-bash .token.shebang.important,.language-shell .token.comment,.language-shell .token.shebang.important{color:#7f848e;font-style:italic}.language-bash .token.builtin.class-name,.language-bash .token.entity,.language-shell .token.builtin.class-name,.language-shell .token.entity{color:#56b6c2}.language-bash .token.keyword,.language-shell .token.keyword{color:#c678dd}.language-bash .token.variable,.language-shell .token.variable{color:#e06c75}.language-go .token.string{color:#98c379}.language-go .token.function{color:#61afef}.language-go .token.builtin,.language-go .token.keyword,.language-go .token.operator{color:#c678dd}.language-go .token.number{color:#d19a66}.language-go .token.operator.colon-equal{color:#e5c07b}.language-go .token.operator.left-arrow{color:#56b6c2}nav{margin-top:auto}nav ul{list-style:none!important;text-align:right}nav ul li{display:inline-block}nav a,nav a:visited{color:#212121;margin:.5rem;text-decoration:none;text-transform:uppercase;font-size:.8rem;font-weight:500;letter-spacing:.05em}@media screen and (max-width:480px){nav{margin-top:0}nav ul{text-align:left}nav a,nav a:visited{font-size:1rem}}header{display:flex;display:-webkit-flex;align-items:center;justify-content:space-between;padding:.5rem 2rem;color:#1d71d7;font-family:Raleway,Inter,Helvetica,Helvetica Neue,Arial,Hiragino Kaku Gothic ProN,Hiragino Sans,Meiryo,sans-serif;font-display:swap}.header-module--siteTitle--3nnx6{border:1px solid #1d71d7;padding:.5rem;margin-top:.5rem;margin-bottom:0;font-weight:200;font-size:1.5rem;word-break:normal}.header-module--siteTitle--3nnx6 a,.header-module--siteTitle--3nnx6 a:visited{color:#1d71d7;text-decoration:none}.header-module--siteTitle--3nnx6 a,.header-module--siteTitle--3nnx6 a:visited,.profile-module--profile--1od3N{font-family:Raleway,Inter,Helvetica,Helvetica Neue,Arial,Hiragino Kaku Gothic ProN,Hiragino Sans,Meiryo,sans-serif}.profile-module--profile--1od3N{background-color:#fff;border:1px solid #d3d3d3;text-align:center;padding:1rem}svg{vertical-align:text-top}.profile-module--profileDescription--pDmES{font-size:.9em}.profile-module--profileIcon--2WAgR{border-radius:50%}.profile-module--profileIconWrapper--1IuRe{max-width:60%}body{color:#212121;background-color:#f9f9f9;max-width:75rem;margin:auto;font-family:Helvetica Neue,Arial,Hiragino Kaku Gothic ProN,Hiragino Sans,Meiryo,sans-serif;font-display:swap}.container{display:flex;display:-webkit-flex}.main{width:80%}.main,.sidebar{padding:.5rem 1rem}.sidebar{display:flex;flex-direction:column;width:20%}@media screen and (max-width:480px){.container{flex-direction:column-reverse}.main,.sidebar{width:auto}}.static-module--main--2fCQu{background-color:#fff;border:1px solid #d3d3d3;padding:1.5rem}.static-module--main--2fCQu h1{color:#1d71d7}.postcardList-module--grid--3xyAW{display:grid;grid-template-columns:1fr;grid-gap:1rem}.postcardList-module--postcard--2-ldD{display:flex;align-items:left;justify-content:left;flex-direction:column;background:#fff;position:relative;min-height:5rem;margin:0 1rem;padding:0 1.5rem 1.5rem;border:1px solid #d3d3d3;transition:all .3s cubic-bezier(.25,.45,.45,.95)}.postcardList-module--postcard--2-ldD:hover{transform:scale(1.02)}.postcardList-module--postcardTitle--3Bnjg{color:#1d71d7;text-decoration:none}.postcardList-module--postcardCategory--mPIMU{margin-left:3rem}.postcardList-module--postMeta--oTRVU{margin-left:2em}.pagination-module--pagination--1Vyut{display:flex;align-items:center;justify-content:space-between;font-family:Raleway,Inter,Helvetica,Helvetica Neue,Arial,Hiragino Kaku Gothic ProN,Hiragino Sans,Meiryo,sans-serif;padding:1.3rem}.pagination-module--pagination--1Vyut a,.pagination-module--pagination--1Vyut a:visited{color:#212121;margin:.5rem;text-decoration:none;text-transform:uppercase;font-size:.8rem;font-weight:500;letter-spacing:.05em}.tableOfContents-module--tocRoot--1rLJb{margin-top:1rem;background-color:#fff;border:1px solid #d3d3d3;font-family:Raleway,Inter,Helvetica,Helvetica Neue,Arial,Hiragino Kaku Gothic ProN,Hiragino Sans,Meiryo,sans-serif;font-size:.9em;position:-webkit-sticky;position:sticky;top:2rem}.tableOfContents-module--tocItem--1XYHy{padding-left:2em;padding-right:.5em}.tableOfContents-module--tocItem--1XYHy li a,.tableOfContents-module--tocItem--1XYHy li a:visited{color:#212121;text-decoration:none;text-transform:uppercase}.tableOfContents-module--tocItem--1XYHy li a:hover{background-color:#d3d3d3}@media screen and (max-width:480px){.tableOfContents-module--tocRoot--1rLJb{display:none}}.post-module--postMain--1kjAV{background-color:#fff;border:1px solid #d3d3d3;padding:1rem}.post-module--postTitle--2fhMh{font-size:2.25rem;color:#1d71d7}.post-module--postMetas--1DqxR{padding:0;margin-bottom:1.5em;list-style-type:none}.post-module--postMetas--1DqxR li{display:inline;margin-right:1rem}@media screen and (max-width:480px){.post-module--postMetas--1DqxR li{display:block}}.post-module--postMeta--2NUr0{font-family:Raleway,Inter,Helvetica,Helvetica Neue,Arial,Hiragino Kaku Gothic ProN,Hiragino Sans,Meiryo,sans-serif}svg{height:1em;vertical-align:middle;width:auto}.post-module--markdown--3X7Z0 h1,.post-module--markdown--3X7Z0 h2,.post-module--markdown--3X7Z0 h3,.post-module--markdown--3X7Z0 h4,.post-module--markdown--3X7Z0 h5,.post-module--markdown--3X7Z0 h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.post-module--markdown--3X7Z0 h1,.post-module--markdown--3X7Z0 h2{font-weight:600;padding-bottom:.3em;border-bottom:1px solid #d3d3d3}.post-module--markdown--3X7Z0 h1{font-size:2em;margin:.67em 0}.post-module--markdown--3X7Z0 h2{font-size:1.5em}.post-module--markdown--3X7Z0 h3{font-size:1.25em}.post-module--markdown--3X7Z0 h4{font-size:1em}.post-module--markdown--3X7Z0 h5{font-size:.875em}.post-module--markdown--3X7Z0 h6{font-size:.85em}.post-module--markdown--3X7Z0 a{color:#0366d6;text-decoration:none;word-break:break-all}.post-module--markdown--3X7Z0 a:hover{text-decoration:underline}.post-module--markdown--3X7Z0 blockquote,.post-module--markdown--3X7Z0 ol,.post-module--markdown--3X7Z0 p,.post-module--markdown--3X7Z0 pre,.post-module--markdown--3X7Z0 table,.post-module--markdown--3X7Z0 ul{margin-top:0;margin-bottom:16px}.post-module--markdown--3X7Z0 blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.post-module--markdown--3X7Z0 blockquote>:first-child{margin-top:0}.post-module--markdown--3X7Z0 blockquote>:last-child{margin-bottom:0}.post-module--markdown--3X7Z0 table{border-spacing:0;border-collapse:collapse;display:block;width:100%;overflow:auto}.post-module--markdown--3X7Z0 table tr{background-color:#fff;border-top:1px solid #c6cbd1}.post-module--markdown--3X7Z0 table tr:nth-child(2n){background-color:#f6f8fa}.post-module--markdown--3X7Z0 table th{font-weight:600}.post-module--markdown--3X7Z0 table td,.post-module--markdown--3X7Z0 table th{padding:6px 13px;border:1px solid #dfe2e5}.post-module--markdown--3X7Z0 code[class=language-text]{color:#212121;background:#d3d3d3!important}</style><meta name="generator" content="Gatsby 3.4.0"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Shell Script | MJUN Tech Note</title><link data-react-helmet="true" rel="canonical" href="URL"/><meta data-react-helmet="true" charSet="utf-8"/><meta data-react-helmet="true" name="description"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=yes"/><link rel="alternate" type="application/rss+xml" title="MJUN Tech Note RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-4ff20b2281b5140026e7.js"/><link as="script" rel="preload" href="/framework-53ec0bd212d6b650cac2.js"/><link as="script" rel="preload" href="/app-83b0915a237c4401a923.js"/><link as="script" rel="preload" href="/commons-ce1e3480905ca9632a55.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-cbbb612071e4e319b27c.js"/><link as="fetch" rel="preload" href="/page-data/posts/2021-05-24-shell-script/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><header role="banner"><h1 class="header-module--siteTitle--3nnx6"><a href="/">MJUN Tech Note</a></h1><nav role="navigation"><ul><li><a href="/">Home</a></li><li><a href="/categories/">Categories</a></li><li><a href="/tags/">Tags</a></li><li><a href="/about/">About</a></li><li><a href="/rss.xml">Feed</a></li></ul></nav></header><div class="container"><div class="sidebar"><div class="profile-module--profile--1od3N"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained profile-module--profileIconWrapper--1IuRe"><div style="max-width:358px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;358&#x27; width=&#x27;358&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE0klEQVQ4yz2U2U8bVxjF/cf0X+hrH1JVqhT1oVJVRYry1EqRmiiqSpWF3ZBACGsWQAlbgLAEk43NBAdv4xXvxsZ4xgvYYEMITgiBQhL11ztDmoermW8099zzne/co3OmmwjkHuDN3sYiV2OT9biTPUihAVyRUeIpB+uFVVKZVbK5NPJahJhiZyk5iE2p1fa4Mi0Ec73aU2dT6rSPVrkGR7oRa7KeKfdV5qUHbOR3ODyEf47h3d4xu6UDjj/Cgfi29XoXR3RAgOr5H0N917kzbRqYelo4P0hg4x5zS3UEw8scfYL3H47EOtZWobjD3v5JfXgEpdIR/tUJpHTdF0I30YXzAxq6M93MytYEgewAU1MvCAWyvCntU3p3oAF8OPzM1naJ0tsD9g8+sScOOhJss3kFh9yMVanGv96NzrfWqQFKSgPLxYeY3F3MzMzgcsbwOnzEnFax+ZPW9s6bdxrDg6N/xfMjxa09Av4EpmATtnQV7kw7OpWqXakXlPXY03pmfFcwLjxjclLCPzdOzrdILFEgldokFkuTShdZWVnH71vFKUUwm3y89LUiZfQCo1Ydih61bU+2A0uyBilbzejjXka6J1h40k/Fn2XMTlsF4yiLJg92axCHFNbAvO4YNnOARX+X6G5AELuBzpVpJl6YIJTv1wC9+ZuMPm3DNiXYKTHKLtRjXrDi8SpI9hBezzLhUEpbkXCGJe8yrng/ie0JYb276JzpWyxvjmg+simCodzEs/l75BMmPr8NkwxKxOJ5IhYjXslNfGVTtJwXK4cs7xAI+3Ept4kXxzUvf9XQJqteqkRKtDJhGCQdtMC2RCG7SsS3TMw4ipxcR0m9RlaKQsttFLmELdyDRanQ2tU0dAm7nBi7Ft96J375ES9NU4yLtiOOAbyuKGN9jzDNe9go7gvALbJru2Qye3jDswTWu4QPBZjwsZRqRBfI3dcAHaJYLgwTyz3F4zMzH7nGXNDEiC3NtS4H85ZVioX3wiofKGyWMFnGmAu0Ec4ZhA8beRX/WxDqQBfK930x9i1ihXEim32Y3WM4I73cN3VQN26hYTDI6Qu1XLpxl2dGG53DC/TNzjGd3OTO41kezCwwHTcL4D50qn5f77JgaU9fxxKtobX+V7499yPf/HyOq/1mfmvu46eyctomx+ieszIZjmKUfYzbOzBG25iVkxhcQyc+VK+MmhQWuUqzTiDfybTlCu2tF6n66yKGng6iGzuYN3eZl23i4B6WMrfFICuEoavE3no8yj0tJHRSqkG0Ooaq5UlI1It6BHeql/bKPxgqv8DzivNU/H6GwYVyEQBX8a3dFf88Fu9NmJPVwi53tBxwq/Glps1KwUBkY0ibtDqpxLYB10ofl6rO8svZ03x76hTfff8DDw3ncecbCeUeslKc/HK7qoSHe0gUn4ihdImWU3q86+04MzfF6Gu0++zOtuBZa8G1UY39RT2LMxXMG2p4JYm8zFaJIGlEJaLKpcokpa5rtToPnSVRx0zgMi+jwpyJZhYidRjDVzHFKsU1vMXUqxGGnjdgDLTQ3dMg9GrSgMzJSm2I3rU7J8CCqQboXO1idPGiSJlypOh9Zl1NPHGUYQyVs1oaYXisgo6es6K+jF5/RgTJsMbIomonwOKalo0a4JLQ9j8GlwYmKxSLjQAAAABJRU5ErkJggg==" alt=""/><picture><source type="image/webp" data-srcset="/static/15ba60a9b462b90372f583a49016a90d/5d191/profile-icon.webp 90w,/static/15ba60a9b462b90372f583a49016a90d/84361/profile-icon.webp 179w,/static/15ba60a9b462b90372f583a49016a90d/3acea/profile-icon.webp 358w" sizes="(min-width: 358px) 358px, 100vw"/><img data-gatsby-image-ssr="" class="profile-module--profileIcon--2WAgR" data-main-image="" style="opacity:0" sizes="(min-width: 358px) 358px, 100vw" decoding="async" loading="lazy" data-src="/static/15ba60a9b462b90372f583a49016a90d/de250/profile-icon.png" data-srcset="/static/15ba60a9b462b90372f583a49016a90d/25ed1/profile-icon.png 90w,/static/15ba60a9b462b90372f583a49016a90d/ad96b/profile-icon.png 179w,/static/15ba60a9b462b90372f583a49016a90d/de250/profile-icon.png 358w" alt="profile image"/></picture><noscript><picture><source type="image/webp" srcSet="/static/15ba60a9b462b90372f583a49016a90d/5d191/profile-icon.webp 90w,/static/15ba60a9b462b90372f583a49016a90d/84361/profile-icon.webp 179w,/static/15ba60a9b462b90372f583a49016a90d/3acea/profile-icon.webp 358w" sizes="(min-width: 358px) 358px, 100vw"/><img data-gatsby-image-ssr="" class="profile-module--profileIcon--2WAgR" data-main-image="" style="opacity:0" sizes="(min-width: 358px) 358px, 100vw" decoding="async" loading="lazy" src="/static/15ba60a9b462b90372f583a49016a90d/de250/profile-icon.png" srcSet="/static/15ba60a9b462b90372f583a49016a90d/25ed1/profile-icon.png 90w,/static/15ba60a9b462b90372f583a49016a90d/ad96b/profile-icon.png 179w,/static/15ba60a9b462b90372f583a49016a90d/de250/profile-icon.png 358w" alt="profile image"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><h3>Junya Morioka</h3><p><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="map-marker-alt" class="svg-inline--fa fa-map-marker-alt fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" width="32" height="32"><path fill="currentColor" d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"></path></svg>Tokyo, Japan</p><p class="profile-module--profileDescription--pDmES">Computer VisionとWeb<br/>に興味があります</p></div><div class="tableOfContents-module--tocRoot--1rLJb"><h3 style="text-align:center">Contents</h3><ul class="tableOfContents-module--tocItem--1XYHy"><li><a href="#shell-scriptの1行目">Shell Scriptの1行目</a></li><li><a href="#if文の書き方">if文の書き方</a></li><li><a href="#パイプ---リスト--">パイプ( | ), リスト( ; )</a></li><li><a href="#-と-">&amp;&amp; と ||</a></li><li><a href="#if文">if文</a></li><li><a href="#case文">case文</a></li><li><a href="#for文">for文</a></li><li><a href="#while文">while文</a></li><li><a href="#select文">select文</a></li><li><a href="#サブシェルとグループコマンド">サブシェルとグループコマンド</a></li><li><a href="#関数">関数</a></li><li><a href="#配列">配列</a></li><li><a href="#算術式の評価と条件式の評価">算術式の評価(())と条件式の評価[[]]</a></li><li><a href="#シェル変数の代入と参照">シェル変数の代入と参照</a></li><li><a href="#位置パラメータ">位置パラメータ</a></li><li><a href="#特殊パラメータ">特殊パラメータ</a></li><li><a href="#パラメータ展開">パラメータ展開</a></li><li><a href="#文字列の囲み方">文字列の囲み方</a></li><li><a href="#リダイレクト">リダイレクト</a></li><li><a href="#よく使うコマンド">よく使うコマンド</a></li><li><a href="#参考">参考</a></li></ul></div></div><div class="main"><article class="post-module--postMain--1kjAV"><h1 class="post-module--postTitle--2fhMh">Shell Script</h1><ul class="post-module--postMetas--1DqxR"><li class="date">2021.05.24</li><li class="post-module--postMeta--2NUr0"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tag" class="svg-inline--fa fa-tag fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="32" height="32"><path fill="currentColor" d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"></path></svg>shellscript</li><li class="post-module--postMeta--2NUr0"><span>#<!-- -->shellscript<!-- --> </span></li></ul><div class="post-module--markdown--3X7Z0"><p>本稿ではshellscriptについて基本的なことを書く。</p><h2 id="shell-scriptの1行目">Shell Scriptの1行目</h2><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>

pythonは
<span class="token comment">#!/usr/bin/env python</span></code></pre></div><p>この一行目はシバン(shebang) [<a href="https://qiita.com/nafuka/items/c97bfd2a4ca26e70e722">1</a>] という。<code class="language-text">#![インタプリタのパス] [インタプリタの引数]</code>で指定する。</p><h2 id="if文の書き方">if文の書き方</h2><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span> -f <span class="token function">file</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&#x27;fileが存在します&#x27;</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> -f <span class="token function">file</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&#x27;fileが存在します&#x27;</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> -f <span class="token function">file</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">&#x27;ファイルが存在します&#x27;</span><span class="token punctuation">;</span> <span class="token keyword">fi</span></code></pre></div><p>then, fiの前には終端記号のコロン(;)か改行が必要。</p><h2 id="パイプ---リスト--">パイプ( | ), リスト( ; )</h2><p>パイプラインは複数のコマンドをパイプ(|)でつなげたもの。コマンドの標準出力を別のコマンドの標準出力に接続させる。
リストは1つ以上のパイプラインを、改行・;・&amp;・&amp;&amp;・||で区切って並べたもの。
&amp;の前はバックグラウンドで動作する。</p><h2 id="-と-">&amp;&amp; と ||</h2><p>&amp;&amp;はAND処理、||はOR処理であるが、Shellscript(C言語)のシステム上、左から順にコマンドが実行される。<br/>
<!-- -->&amp;&amp;の場合は左のコマンドが偽であった場合は右のコマンドは実行されない。<br/>
<!-- -->||の場合は左のコマンドが真であった場合は右のコマンドが実行されない。<br/>
<!-- -->この挙動を利用して、簡単な条件分岐が行える。
&amp;&amp;では左のコマンドが真のときのみ右のコマンドを行う。||では左のコマンドが偽のときに右のコマンドを行う。
といったように使用できる。</p><h2 id="if文">if文</h2><p>基本形は以下の通り。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$i</span>&quot;</span> -eq <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&#x27;i=3&#x27;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$i</span>&quot;</span> -eq <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&#x27;i=4&#x27;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&#x27;i!=3,4&#x27;</span>
<span class="token keyword">fi</span></code></pre></div><p>testコマンド（上記だと<!-- -->[ ]<!-- -->で書かれている）を用いない場合は以下の通り</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token function">cmp</span> -s file1 file2<span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token comment"># -sオプションでメッセージなし</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&#x27;file1==file2&#x27;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&#x27;file1!=file2&#x27;</span>
<span class="token keyword">fi</span>

<span class="token comment">#または</span>

<span class="token function">cmp</span> -s file1 file2
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&#x27;file1==file2&#x27;</span>
<span class="token keyword">fi</span></code></pre></div><p>2つ目の書き方は、if文の記法をtest([])に揃えるためのもの。<code class="language-text">$?</code>で実行ステータスを確認できるため、それを利用している。</p><p>否定条件も使える。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token string">&quot;<span class="token variable">$i</span>&quot;</span> -eq <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
 <span class="token builtin class-name">echo</span> <span class="token string">&#x27;i!=3&#x27;</span>
<span class="token keyword">fi</span></code></pre></div><p>ifと[の間にはスペースが必要。</p><h2 id="case文">case文</h2><p>基本形は以下の通り。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token keyword">case</span> <span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -s<span class="token variable">`</span></span> <span class="token keyword">in</span>
  Linux<span class="token operator">|</span>FreeBSD<span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&#x27;this OS is Linux or FreeBSD&#x27;</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  *<span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&#x27;other OS&#x27;</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span></code></pre></div><p>if文で毎回コマンド実行するよりはこっちのほうが簡潔に書けたりする。</p><h2 id="for文">for文</h2><p>基本形は以下の通り。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> memo.txt prog.txt fig1.png
<span class="token keyword">do</span> 
  <span class="token function">cp</span> -p <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span>.bak
<span class="token keyword">done</span>

memo.txt.bak
prog.txt.bak
fig1.png.bak</code></pre></div><p><code class="language-text">for file in *</code>のようにすると、カレントディレクトリの全てのファイルが引数fileに代入される。
<code class="language-text">for file in `&lt; filelist`</code>のようにするとファイルから入力を行える。</p><div class="gatsby-highlight" data-language="txt"><pre class="language-txt"><code class="language-txt"># filelist
memo.txt
prog.txt
fig1.png</code></pre></div><p>他の言語と同じように<code class="language-text">continue, break</code>が使える。</p><p>算術式を用いる場合は以下の通り。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">))</span></span> <span class="token punctuation">{</span>
  <span class="token variable"><span class="token punctuation">((</span>sum <span class="token operator">+</span><span class="token operator">=</span> i<span class="token punctuation">))</span></span>
<span class="token punctuation">}</span></code></pre></div><h2 id="while文">while文</h2><p>基本の文は以下の通り。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$i</span>&quot;</span> -le <span class="token number">100</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token string">&quot;<span class="token variable">$sum</span>&quot;</span> + <span class="token string">&quot;<span class="token variable">$i</span>&quot;</span><span class="token variable">`</span></span>
  <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token string">&quot;<span class="token variable">$i</span>&quot;</span> + <span class="token number">1</span><span class="token variable">`</span></span>
<span class="token keyword">done</span></code></pre></div><p>bashの場合は<code class="language-text">`expr &quot;$i&quot; + 1`</code>の代わりに<code class="language-text">((i++))</code>が使える。</p><p>無限ループにする場合は</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token keyword">while</span> <span class="token builtin class-name">:</span>
<span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;a&quot;</span>
<span class="token keyword">done</span></code></pre></div><p>のようにセミコロン(:)を用いる。</p><h2 id="select文">select文</h2><p>選択メニューを表示して、応答を受け付ける事ができる。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable"><span class="token environment constant">PS3</span></span><span class="token operator">=</span><span class="token string">&#x27;コマンド?&#x27;</span>
<span class="token keyword">select</span> <span class="token for-or-select variable">cmd</span> <span class="token keyword">in</span> up down left right quit
<span class="token keyword">do</span>
  <span class="token keyword">case</span> <span class="token variable">$cmd</span> <span class="token keyword">in</span>
    up<span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&#x27;up&#x27;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    down<span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&#x27;down&#x27;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    left<span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&#x27;left&#x27;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    right<span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&#x27;right&#x27;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    quit<span class="token punctuation">)</span>
      <span class="token builtin class-name">break</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$REPLAY</span>&quot;</span>&#x27;は選択不可&#x27;<span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
<span class="token keyword">done</span></code></pre></div><p>selectの要素に連番をつけたメニューとPS3を出力する。
上のコードの結果は以下のようになる。</p><div class="gatsby-highlight" data-language="txt"><pre class="language-txt"><code class="language-txt">1) up      2) down    3) left    4) right   5) quit
コマンド?1
up
コマンド?2
down
コマンド?5</code></pre></div><h2 id="サブシェルとグループコマンド">サブシェルとグループコマンド</h2><p>サブシェルでは別のシェルで、グループコマンドは現在のシェルで一連のコマンドを行う。
使用例は以下。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># サブシェル</span>
<span class="token punctuation">(</span>
  <span class="token builtin class-name">cd</span> /hoge/etc
  <span class="token function">cp</span> -p aaa <span class="token punctuation">..</span>/
<span class="token punctuation">)</span> <span class="token operator">&gt;</span> log

<span class="token comment">#グループコマンド</span>
<span class="token punctuation">{</span>
  <span class="token function">uname</span> -a
  <span class="token function">date</span>
  <span class="token function">who</span>
<span class="token punctuation">}</span> <span class="token operator">&gt;</span> log</code></pre></div><h2 id="関数">関数</h2><p>基本文は以下。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function-name function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello World!&quot;</span>
<span class="token punctuation">}</span>

func</code></pre></div><h2 id="配列">配列</h2><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">array<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&#x27;three&#x27;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${array<span class="token punctuation">[</span>3<span class="token punctuation">]</span>}</span>&quot;</span>
<span class="token comment"># three</span>
<span class="token assign-left variable">array2</span><span class="token operator">=</span><span class="token punctuation">(</span>one two three<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${array2<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span>
<span class="token comment"># one two three</span>
<span class="token builtin class-name">unset</span> <span class="token string">&#x27;array2[1]&#x27;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${array2<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span>
<span class="token comment"># one three</span></code></pre></div><p>関数の最初の{の後にはスペースか改行が必要。
<code class="language-text">func(){ echo Hello;}</code></p><h2 id="算術式の評価と条件式の評価">算術式の評価(())と条件式の評価[[]]</h2><p>bashにて実装された機能。<br/>
<!-- -->算術式の評価では中にC言語Likeな算術を書ける。
条件式の評価では<code class="language-text">&lt;&gt;,(),&amp;&amp;,||</code>をクォートする必要がない。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span>

<span class="token punctuation">[</span> a -a b <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span> a <span class="token operator">&amp;&amp;</span> b <span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span> a -o b <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span> a <span class="token operator">||</span> b <span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>testコマンドとの違い[<a href="https://qiita.com/kiyodori/items/e9fabcba03fc1e76dbdd">2</a>]</p><table><thead><tr><th>条件式</th><th>test</th><th>[[]]</th></tr></thead><tbody><tr><td>AND</td><td>a -a b</td><td>a &amp;&amp; b</td></tr><tr><td>OR</td><td>a -o b</td><td>a</td></tr><tr><td>文字列比較</td><td>文字列a == 文字列b</td><td>文字列a == パターンb</td></tr></tbody></table><h2 id="シェル変数の代入と参照">シェル変数の代入と参照</h2><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token string">&#x27;hello world&#x27;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$a</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${a}</span>&quot;</span></code></pre></div><p>シングルクォートとダブルクォートの使い分けに気をつける。シングルなら展開無しでそのまま代入される。</p><h2 id="位置パラメータ">位置パラメータ</h2><p>シェルスクリプトのの引数を参照できる。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ ./aaa.sh a b c d
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>
<span class="token comment"># a</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span>
<span class="token comment"># ./aaa.sh</span>

<span class="token builtin class-name">set</span> Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${10}</span>&quot;</span>
<span class="token comment"># Oct</span></code></pre></div><h2 id="特殊パラメータ">特殊パラメータ</h2><table><thead><tr><th>パラメータ</th><th>内容</th></tr></thead><tbody><tr><td>$0</td><td>起動されたシェルスクリプト名</td></tr><tr><td>$1~9</td><td>それぞれの引数(arg1~9)</td></tr><tr><td>$@</td><td>引数全てのリスト</td></tr><tr><td>$*</td><td>引数全てを連結して参照する</td></tr><tr><td>$#</td><td>引数の数を表示する($0は含まれない)</td></tr><tr><td>$?</td><td>終了コードを参照する</td></tr><tr><td>$!</td><td>最後にバックグラウンドで実行したプロセスID</td></tr><tr><td>\$$</td><td>シェル自身のプロセスID</td></tr><tr><td>$-</td><td>現在のシェルのオプションフラグ</td></tr><tr><td>$_</td><td>直前に実行したコマンドの最後の引数</td></tr></tbody></table><h2 id="パラメータ展開">パラメータ展開</h2><h3 id="パラメータのデフォルト値">パラメータのデフォルト値</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">cp</span> <span class="token function">file</span> <span class="token string">&quot;<span class="token variable">${1<span class="token operator">:-</span><span class="token operator">/</span>tmp}</span>&quot;</span>
<span class="token function">cp</span> <span class="token function">file</span> <span class="token string">&quot;<span class="token variable">${1-<span class="token operator">/</span>tmp}</span>&quot;</span></code></pre></div><p>上の例の場合は引数1が設定されていないか、空文字のときに<code class="language-text">/tmp</code>が展開され、下の場合には設定されてない場合のみ<code class="language-text">/tmp</code>が展開される。
空文字を無視するかしないかで判断する。</p><h3 id="パラメータへデフォルト値を代入">パラメータへデフォルト値を代入</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">cp</span> <span class="token function">file</span> <span class="token string">&quot;<span class="token variable">${DIST<span class="token operator">:=</span><span class="token operator">/</span>tmp}</span>&quot;</span>
<span class="token function">cp</span> <span class="token function">file</span> <span class="token string">&quot;<span class="token variable">${DIST=<span class="token operator">/</span>tmp}</span>&quot;</span></code></pre></div><p>前述のものと違い、代入してから展開する。</p><h3 id="パラメータ未設定時にエラーを出力">パラメータ未設定時にエラーを出力</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">cp</span> <span class="token string">&quot;<span class="token variable">${1<span class="token operator">:?</span>error<span class="token operator">!</span>}</span>&quot;</span> ./
<span class="token function">cp</span> <span class="token string">&quot;<span class="token variable">${1?error<span class="token operator">!</span>}</span>&quot;</span> ./</code></pre></div><p>パラメータが設定されていなければ、?の後に記述したメッセージが表示されてスクリプトが終了する。</p><h3 id="パラメータの長さ">パラメータの長さ</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token operator">#</span>test}</span></code></pre></div><p>パラメータの文字列の長さを返す。<br/>
<!-- -->スクリプトで使わなくても、コマンド<code class="language-text">cat text | wc -c</code>でも代用できる。</p><h3 id="パラメータからパターンを削除">パラメータからパターンを削除</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${DIR<span class="token operator">#</span>*<span class="token operator">/</span>}</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${DIR<span class="token operator">##</span>*<span class="token operator">/</span>}</span>&quot;</span></code></pre></div><p><code class="language-text">${パラメータ#パターン}</code>のように使う。#が1つだと最短の部分が、#が2つだと最長の部分が左から取り除かれる。</p><p>#<!-- -->を%に変更すると右側から取り除かれる。</p><h3 id="文字列の一部を抜粋">文字列の一部を抜粋</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token variable">${パラメータ<span class="token operator">:</span>オフセット<span class="token operator">:</span>長さ}</span></code></pre></div><p>オフセットで戦闘から何文字削除するか、長さで削除した文字列のうち先頭の何文字を表示するか決定する。</p><h3 id="パラメータの置換">パラメータの置換</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token variable">${パラメータ<span class="token operator">/</span>パターン<span class="token operator">/</span>置換文字列}</span>
<span class="token variable">${パラメータ<span class="token operator">/</span><span class="token operator">/</span>パターン<span class="token operator">/</span>置換文字列}</span></code></pre></div><p><code class="language-text">/</code>が1つだと先頭の1つを置換する。2つだと全て置換する。</p><h2 id="文字列の囲み方">文字列の囲み方</h2><p>シングルクォート<code class="language-text">&#x27; &#x27;</code>では文字列がそのまま表示される。ダブルクオート<code class="language-text">&quot; &quot;</code>ではパラメータ展開とコマンド置換が行われる。
バッククォート<code class="language-text">` `</code>では囲んだ部分でのコマンドの標準入力で置換が行われる。<code class="language-text">$( )</code>はバッククォートと同じことを書き方を変えて行える。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token string">&#x27;hello&#x27;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#x27;<span class="token variable">${a}</span>&#x27;</span>
<span class="token comment"># ${a}</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${a}</span>&quot;</span>
<span class="token comment"># hello</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>&quot;</span>
<span class="token comment"># /home/user</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token comment"># /home/user</span></code></pre></div><h2 id="リダイレクト">リダイレクト</h2><h3 id="入力">入力</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">cat</span> <span class="token operator">&lt;</span> <span class="token function">file</span></code></pre></div><h3 id="出力">出力</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">cat</span> <span class="token string">&#x27;Hello World&#x27;</span> <span class="token operator">&gt;</span> log</code></pre></div><h3 id="追記">追記</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">date</span> <span class="token operator">&gt;&gt;</span> log</code></pre></div><h3 id="エラー出力">エラー出力</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">rm</span> -rf non-exist <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /dev/null <span class="token comment"># エラーメッセージを出さずに削除</span></code></pre></div><h3 id="ヒアドキュメント">ヒアドキュメント</h3><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&#x27;EOF&#x27;
abcde
abcde
EOF</span></code></pre></div><p>終了文字列(上記だとEOF)がシングルクォートされてると変数展開等は行われない。</p><h3 id="ヒアストリング">ヒアストリング</h3><p>基本的にはヒアストリングと一緒。終了文字列を書かなくて良い。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">cat</span> <span class="token operator">&lt;&lt;&lt;</span> <span class="token string">&#x27;abcde
abcde&#x27;</span></code></pre></div><h2 id="よく使うコマンド">よく使うコマンド</h2><h3 id="expr">expr</h3><p>数値計算を行う。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">expr</span> <span class="token number">3</span> + <span class="token number">5</span>
<span class="token comment"># 8</span></code></pre></div><h3 id="basename">basename</h3><p>ファイル名のみを出力する。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">basename</span> /home/user/test.txt
<span class="token comment"># test.txt</span>
<span class="token function">basename</span> /home/user/test.txt .txt
<span class="token comment"># test</span></code></pre></div><h3 id="dirname">dirname</h3><p>ディレクトリ名を表示する。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">dirname</span> /home/user/test.txt
<span class="token comment"># /home/user</span>
<span class="token function">dirname</span> test.txt
<span class="token comment"># .</span></code></pre></div><h3 id="wc">wc</h3><p>ファイルの行数、文字数、サイズを表示できる。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">wc</span> -lwc test.txt
<span class="token comment"># row</span>
<span class="token comment"># words</span>
<span class="token comment"># size</span></code></pre></div><h3 id="sed">sed</h3><p>ファイルの中の文字列を置き換える。</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">&#x27;aaaaccccaaaa&#x27;</span> <span class="token operator">&gt;</span> old.txt

<span class="token function">sed</span> <span class="token string">&#x27;s/aaaa/b/&#x27;</span> old.txt
<span class="token comment"># bccccaaaa</span>
<span class="token function">sed</span> <span class="token string">&#x27;s/aaaa/b/g&#x27;</span> old.txt
<span class="token comment"># bccccb</span></code></pre></div><h2 id="参考">参考</h2><h3 id="文献">文献</h3><p>[<!-- -->1]: <a href="https://qiita.com/nafuka/items/c97bfd2a4ca26e70e722">https://qiita.com/nafuka/items/c97bfd2a4ca26e70e722</a>  </p><p>[<!-- -->2]: <a href="https://qiita.com/kiyodori/items/e9fabcba03fc1e76dbdd">https://qiita.com/kiyodori/items/e9fabcba03fc1e76dbdd</a></p><h3 id="書籍">書籍</h3><p><a href="https://amzn.to/3vkzkgM">[改訂第3版]シェルスクリプト基本リファレンス ──#!/bin/shで、ここまでできる (WEB+DB PRESS plus)</a></p></div></article></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/2021-05-24-shell-script/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-d7b88785812660a4ac70.js"],"app":["/app-83b0915a237c4401a923.js"],"component---src-pages-404-js":["/component---src-pages-404-js-a09764aa92d8779d263c.js"],"component---src-pages-about-js":["/component---src-pages-about-js-d18f32671b00a8d7c88b.js"],"component---src-pages-categories-js":["/component---src-pages-categories-js-5b0ac0751dc5f6c700af.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-721ed5767dadfdf3afe1.js"],"component---src-templates-index-js":["/component---src-templates-index-js-9b9543726d1d86a921c2.js"],"component---src-templates-post-js":["/component---src-templates-post-js-cbbb612071e4e319b27c.js"]};/*]]>*/</script><script src="/polyfill-d7b88785812660a4ac70.js" nomodule=""></script><script src="/component---src-templates-post-js-cbbb612071e4e319b27c.js" async=""></script><script src="/commons-ce1e3480905ca9632a55.js" async=""></script><script src="/app-83b0915a237c4401a923.js" async=""></script><script src="/framework-53ec0bd212d6b650cac2.js" async=""></script><script src="/webpack-runtime-4ff20b2281b5140026e7.js" async=""></script></body></html>